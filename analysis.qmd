---
title: "GDP Growth Analysis"
format:
  html:
    code-fold: true
    code-tools: true
---

```{python}
import pandas as pd
import matplotlib.pyplot as plt
import requests
from pathlib import Path

# Download the data if not already present
url = "https://www.rug.nl/ggdc/historicaldevelopment/maddison/data/mpd2018.xlsx"
output_file = "mpd2018.xlsx"

if not Path(output_file).exists():
    response = requests.get(url)
    with open(output_file, "wb") as f:
        f.write(response.content)

# Read the Excel file
df = pd.read_excel(output_file, sheet_name="Full data")

# Filter for Former USSR
ussr_data = df[df['country'] == 'Former USSR'].copy()

# Sort by year
ussr_data = ussr_data.sort_values('year')

# Calculate GDP (using population and GDP per capita)
ussr_data['total_gdp'] = ussr_data['rgdpnapc'] * ussr_data['pop'] * 1000  # pop is in thousands

# Calculate year-over-year growth rates
ussr_data['gdp_growth'] = ussr_data['total_gdp'].pct_change() * 100
ussr_data['gdp_per_capita_growth'] = ussr_data['rgdpnapc'].pct_change() * 100

# Create the plots
plt.figure(figsize=(15, 10))

# Plot 1: GDP Growth Rate
plt.subplot(2, 1, 1)
plt.plot(ussr_data['year'], ussr_data['gdp_growth'], marker='o')
plt.title('USSR GDP Growth Rate (%)')
plt.xlabel('Year')
plt.ylabel('Growth Rate (%)')
plt.grid(True)

# Plot 2: GDP per Capita Growth Rate
plt.subplot(2, 1, 2)
plt.plot(ussr_data['year'], ussr_data['gdp_per_capita_growth'], marker='o', color='orange')
plt.title('USSR GDP per Capita Growth Rate (%)')
plt.xlabel('Year')
plt.ylabel('Growth Rate (%)')
plt.grid(True)

plt.tight_layout()
plt.show()

# Display summary statistics
print("\nUSSR GDP Growth Analysis")
print("-" * 30)
print(f"Data period: {ussr_data['year'].min()} - {ussr_data['year'].max()}")
print(f"\nAverage GDP growth rate: {ussr_data['gdp_growth'].mean():.2f}%")
print(f"Average GDP per capita growth rate: {ussr_data['gdp_per_capita_growth'].mean():.2f}%")
print(f"\nHighest GDP growth: {ussr_data['gdp_growth'].max():.2f}% (Year: {ussr_data.loc[ussr_data['gdp_growth'].idxmax(), 'year']})")
print(f"Lowest GDP growth: {ussr_data['gdp_growth'].min():.2f}% (Year: {ussr_data.loc[ussr_data['gdp_growth'].idxmin(), 'year']})")

# Display the data table
display(ussr_data[['year', 'gdp_growth', 'gdp_per_capita_growth']].round(2))
```
